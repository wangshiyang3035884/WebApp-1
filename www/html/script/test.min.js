/** 
 * -------------------------------------------------------------
 * Copyright (c) 2014 baofeng, All rights reserved. 
 * http://www.baofeng.com/ 
 *  
 * @version: 0.0.1 
 * @author: Nxiao <363305175@qq.com> 
 * @description: nodejs全栈案例 
 * @date: 2015-01-22  18:31:02
 * ------------------------------------------------------------- 
 */ 

function logincall(a){var b,c=a&&a.data;c&&c instanceof baofeng.model.UserVo&&(b=new baofeng.user.Admin,b.decorate(c))}var baofeng={};baofeng.utils={xmlHttp:null,prefixes:["","-ms-","-moz-","-webkit-","-o-"],pfx:["","MS","moz","webkit","o"],pfxfil:["transform"],pfxname:null,cssMap:{},createXMLHttpRequest:function(){window.ActiveXObject?this.xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(this.xmlHttp=new XMLHttpRequest)},createURL:function(url,callback){var type=-1!=url.indexOf(".xml"),data;this.createXMLHttpRequest(),this.xmlHttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&callback&&(data=type?this.responseXML:eval("("+this.responseText+")"),callback(data))},this.xmlHttp.open("GET",url,"true"),this.xmlHttp.send(null)},provide:function(a){for(var b=a.split("."),c=window,d=0,e=b.length;e>d;d++)c=c[b[d]]?c[b[d]]:c[b[d]]=new Object},require:function(){},loadScript:function(a,b){var c,d=document.getElementsByTagName("head")[0];c=document.createElement("script"),c.type="text/javascript",c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c.onload=c.onreadystatechange=null,b())},c.src=a,d.appendChild(c)},debug:function(a,b,c){var d,e,f,g,h,i,j;e=function(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c},d=function(a){var b=i[a],c=b[0],e=b[1];if(0!=e.length)for(var f=0,g=e.length;g>f;f++)d(e[f]);j.push(c)},h=function(){baofeng.utils.loadScript(j[f],function(){f++,g>f?h():c&&c()})},baofeng.utils.createURL(a,function(a){i=a,j=[],b in i||(j=null),j&&(d(b),j=e(j),g=j.length,f=0),j&&h()})},bind:function(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}},charlen:function(a){return a?a.replace(/[^\x00-\xff]/g,"xx").length:0},inherits:function(a,b){a.prototype=new b,a.prototype.constructor=a},analyzetpl:function(a,b){return b?a.replace(/\{(.*?)\}/gi,function(){return b[arguments[1]]||""}):a},sizechange:function(a){return a/=1048576,parseInt(a)>0?a.toFixed(1)+"MB":a.toFixed(2)+"MB"},locationjson:function(a,b){var c,d,e;if(a){e={},c=a.split("&");for(var f=0,g=c.length;g>f;f++)d=c[f].split("="),e[d[0]]=d[1]}return e?b&&b in e?e[b]:e:null},getType:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},ajax:function(a,b,c,d,e,f){var g=new XMLHttpRequest;if(g.upload){if(g.onreadystatechange=function(){4==g.readyState&&308==g.status&&c(g.responseText)},g.upload.onerror=g.upload.ontimeout=d,g.timeout=f||3e3,g.withCredentials=!1,g.open("POST",a,!0),e)for(var h in e)g.setRequestHeader(h,e[h]);g.send(b||null)}},getStyle:function(a,b){return this.getStyle=a.currentStyle?function(a,b){return a.currentStyle[this.cssName(b)]}:function(a,b){return document.defaultView.getComputedStyle(a,null)[this.cssName(b)]},this.getStyle(a,b)},upperCase:function(a,b){return b.toUpperCase()},cssName:function(a){for(var b,c,d=document.documentElement.style,e=0,f=this.prefixes.length;f>e;e++)if(this.pfxname=c=this.prefixes[e],b=(c+a).replace(/-([a-z])/g,this.upperCase),b in d)return this.cssName=function(a){return b=this.cssMap[a],b||(this.cssMap[a]=b=a in d?a:(c+a).replace(/-([a-z])/g,this.upperCase)),b},b;return null},setStyle:function(a,b){var c,d;for(var e in b){if(c=b[e],this.pfxname)for(var f=0,g=this.pfxfil.length;g>f;f++)if(d=this.pfxfil[f],-1!=c.indexOf(d)){c=c.replace(d,this.pfxname+d);break}a.style[this.cssName(e)]=c}},prefixedEvent:function(a,b,c){for(var d,e=0;e<this.pfx.length;e++)d=b,this.pfx[e]||(d=b.toLowerCase()),a.addEventListener(this.pfx[e]+d,c,!1)},getObjectById:function(a){var b,c,d=document.getElementById(a)||null;return d&&"OBJECT"==d.nodeName.toUpperCase()&&("undefined"!=typeof d.SetVariable?b=d:(c=d.getElementsByTagName("object")[0],c&&(b=c))),b}},baofeng.utils.provide("baofeng.events.Event"),baofeng.events.Event=function(a){this.target=null,this.type=a,this.data=null},baofeng.events.Event.ERROR="error",baofeng.events.Event.COMPLETE="complete",baofeng.events.Event.PROGRESS="progress",baofeng.events.Event.LOADSTAET="loadstart",baofeng.utils.provide("baofeng.model.UserVo"),baofeng.model.UserVo=function(a,b){this.name=a,this.age=b},baofeng.model.UserVo.prototype.GetName=function(){return this.name},baofeng.model.UserVo.prototype.SetName=function(a){this.name=a},baofeng.model.UserVo.prototype.GetAge=function(){return this.age},baofeng.model.UserVo.prototype.SetAge=function(a){this.age=a},baofeng.utils.provide("baofeng.events.EventDispatcher"),baofeng.events.funList={},baofeng.events.uint=0,baofeng.events.EventDispatcher=function(){},baofeng.events.EventDispatcher.prototype.addEventListener=function(a,b){return baofeng.events.uint++,baofeng.events.funList[baofeng.events.uint]=b,this[a]&&this[a].constructor===Array?this[a].push(baofeng.events.uint):this[a]=[baofeng.events.uint],baofeng.events.uint},baofeng.events.EventDispatcher.prototype.dispatchEvent=function(a){var b=this[a.type];if(b)for(var c=0,d=b.length;d>c;c++)baofeng.events.funList[b[c]]&&(a.target=this,baofeng.events.funList[b[c]].call(this,a))},baofeng.events.EventDispatcher.prototype.hasEventListener=function(a){return this[a]?!0:!1},baofeng.events.EventDispatcher.prototype.removeEventListener=function(a){for(var b in this[a])delete baofeng.events.funList[b];delete this[a]},baofeng.events.EventDispatcher.prototype.unlistenByKey=function(a){a in baofeng.events.funList&&(baofeng.events.funList[a]=null,delete baofeng.events.funList[a])},baofeng.utils.provide("baofeng.ui.Component"),baofeng.ui.Component=function(){baofeng.events.EventDispatcher.apply(this,arguments)},baofeng.utils.inherits(baofeng.ui.Component,baofeng.events.EventDispatcher),baofeng.ui.Component.prototype.log=function(){},baofeng.ui.Component.prototype.decorate=function(a){this.disposeInternal(a),this.enterDocument()},baofeng.ui.Component.prototype.release=function(){this.decorateInternal()},baofeng.ui.Component.prototype.disposeInternal=function(){},baofeng.ui.Component.prototype.enterDocument=function(){},baofeng.ui.Component.prototype.decorateInternal=function(){},baofeng.utils.provide("baofeng.user.Land"),baofeng.user.Land=function(){baofeng.ui.Component.apply(this,arguments),this.LandEvent=null},baofeng.utils.inherits(baofeng.user.Land,baofeng.ui.Component),baofeng.user.Land.TIMEOUT=3e3,baofeng.user.Land.prototype.init=function(){setTimeout(baofeng.utils.bind(this.landComplete,this),baofeng.user.Land.TIMEOUT)},baofeng.user.Land.prototype.landComplete=function(){console.log("\u8bf7\u6c42\u670d\u52a1\u5668\u53d6\u5f97\u767b\u9646\u4fe1\u606f"),this.LandEvent.data=new baofeng.model.UserVo("\u5b81\u8096",27),this.dispatchEvent(this.LandEvent)},baofeng.user.Land.prototype.disposeInternal=function(){this.init()},baofeng.user.Land.prototype.enterDocument=function(){this.LandEvent=new baofeng.events.Event(baofeng.events.Event.COMPLETE)},baofeng.utils.provide("baofeng.user.Login"),baofeng.user.Login=function(){this.LoginEvent=null,this.uservo=null},baofeng.utils.inherits(baofeng.user.Login,baofeng.ui.Component),baofeng.user.Login.TIMEOUT=3e3,baofeng.user.Login.prototype.disposeInternal=function(a){this.uservo=a},baofeng.user.Login.prototype.enterDocument=function(){this.LoginEvent=new baofeng.events.Event(baofeng.events.Event.COMPLETE),this.LoginEvent.data=this.uservo,console.log("\u83b7\u53d6\u767b\u9646\u4fe1\u606f\u6e32\u67d3UI\u754c\u9762"),this.dispatchEvent(this.LoginEvent)},baofeng.utils.provide("baofeng.user.Admin"),baofeng.user.Admin=function(){this.uservo=null},baofeng.utils.inherits(baofeng.user.Admin,baofeng.ui.Component),baofeng.user.Admin.TIMEOUT=3e3,baofeng.user.Admin.prototype.renderingview=function(){document.body.innerHTML="\u767b\u9646\u6210\u529f"+this.uservo.GetName()+this.uservo.GetAge()},baofeng.user.Admin.prototype.disposeInternal=function(a){this.uservo=a,this.renderingview()},baofeng.user.Admin.prototype.enterDocument=function(){},baofeng.utils.provide("baofeng.model.constant"),baofeng.model.constant.cuid="cuid",baofeng.model.constant.namemax=20,baofeng.model.constant.phonemax=11,baofeng.model.constant.emailmax=80,baofeng.model.constant.qqmax=80,baofeng.model.constant.captchamax=4,baofeng.model.constant.websitemax=32,baofeng.model.constant.passwordmax=16,baofeng.model.constant.videosize=4194304,baofeng.model.constant.servicetype=1,baofeng.model.constant.liveurl="http://cloud.baofeng.com/user/activeUser",baofeng.model.constant.playurl="http://cloud.baofeng.com/swf/cloud.swf",baofeng.model.constant.htmlurl="http://cloud.baofeng.com/help/bcloud.html",baofeng.model.constant.paasurl="http://query.bfcloud.com/",baofeng.model.constant.uploadname="swfupload",baofeng.model.constant.videotypes="wmv|avi|dat|asf|rm|rmvb|ram|mpg|mpeg|3gp|mov|mp4|m4v|dvix|dv|dat|mkv|flv|f4v|vob|ram|qt|divx|cpk|fli|flc|mod|ts".toUpperCase(),baofeng.utils.provide("baofeng.test"),baofeng.test=function(){var a,b;a=new baofeng.user.Land,b=new baofeng.user.Login,a.addEventListener(baofeng.events.Event.COMPLETE,function(a){b.addEventListener(baofeng.events.Event.COMPLETE,logincall),b.decorate(a.data)}),a.decorate()},baofeng.test();